{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst elements = {\n  dateInput: document.querySelector('#datetime-picker'),\n  startButton: document.querySelector('[data-start]'),\n  daysValue: document.querySelector('[data-days]'),\n  hoursValue: document.querySelector('[data-hours'),\n  minutesValue: document.querySelector('[data-minutes'),\n  secondsValue: document.querySelector('[data-seconds'),\n};\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n};\n\nconst datePicker = flatpickr(elements.dateInput, options);\n\nlet userSelectedTime;\n\nfunction setTimer(selectedDates) {\n  if (selectedDates[0].getTime() > Date.now()) {\n    elements.startButton.removeAttribute('disabled');\n\n    userSelectedTime = selectedDates[0].getTime() - Date.now();\n  } else {\n    elements.startButton.setAttribute('disabled', '');\n\n    iziToast.show({\n      message: 'Please choose a date in the future',\n      messageColor: '#fff',\n      backgroundColor: '#ff3333',\n      position: 'topRight',\n    });\n  }\n}\n\ndatePicker.config.onClose.push(setTimer);\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(timeValue) {\n  if (timeValue < 10) {\n    return timeValue.toString().padStart(2, '0');\n  }\n  return timeValue;\n}\n\nelements.startButton.addEventListener('click', () => {\n  elements.startButton.setAttribute('disabled', '');\n  elements.dateInput.setAttribute('disabled', '');\n\n  const timerInterval = setInterval(() => {\n    const currentTimerValue = convertMs(userSelectedTime);\n\n    elements.daysValue.textContent = addLeadingZero(currentTimerValue.days);\n    elements.hoursValue.textContent = addLeadingZero(currentTimerValue.hours);\n    elements.minutesValue.textContent = addLeadingZero(\n      currentTimerValue.minutes\n    );\n    elements.secondsValue.textContent = addLeadingZero(\n      currentTimerValue.seconds\n    );\n\n    userSelectedTime -= 1000;\n\n    if (\n      elements.daysValue.textContent === '00' &&\n      elements.hoursValue.textContent === '00' &&\n      elements.minutesValue.textContent === '00' &&\n      elements.secondsValue.textContent === '00'\n    ) {\n      clearInterval(timerInterval);\n    }\n  }, 1000);\n});\n"],"names":["elements","options","datePicker","flatpickr","userSelectedTime","setTimer","selectedDates","iziToast","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","timeValue","timerInterval","currentTimerValue"],"mappings":"2FAKA,MAAMA,EAAW,CACf,UAAW,SAAS,cAAc,kBAAkB,EACpD,YAAa,SAAS,cAAc,cAAc,EAClD,UAAW,SAAS,cAAc,aAAa,EAC/C,WAAY,SAAS,cAAc,aAAa,EAChD,aAAc,SAAS,cAAc,eAAe,EACpD,aAAc,SAAS,cAAc,eAAe,CACtD,EAEMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,CACnB,EAEMC,EAAaC,EAAUH,EAAS,UAAWC,CAAO,EAExD,IAAIG,EAEJ,SAASC,EAASC,EAAe,CAC3BA,EAAc,CAAC,EAAE,QAAO,EAAK,KAAK,OACpCN,EAAS,YAAY,gBAAgB,UAAU,EAE/CI,EAAmBE,EAAc,CAAC,EAAE,QAAO,EAAK,KAAK,QAErDN,EAAS,YAAY,aAAa,WAAY,EAAE,EAEhDO,EAAS,KAAK,CACZ,QAAS,qCACT,aAAc,OACd,gBAAiB,UACjB,SAAU,UAChB,CAAK,EAEL,CAEAL,EAAW,OAAO,QAAQ,KAAKG,CAAQ,EAEvC,SAASG,EAAUC,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAeC,EAAW,CACjC,OAAIA,EAAY,GACPA,EAAU,SAAU,EAAC,SAAS,EAAG,GAAG,EAEtCA,CACT,CAEAf,EAAS,YAAY,iBAAiB,QAAS,IAAM,CACnDA,EAAS,YAAY,aAAa,WAAY,EAAE,EAChDA,EAAS,UAAU,aAAa,WAAY,EAAE,EAE9C,MAAMgB,EAAgB,YAAY,IAAM,CACtC,MAAMC,EAAoBT,EAAUJ,CAAgB,EAEpDJ,EAAS,UAAU,YAAcc,EAAeG,EAAkB,IAAI,EACtEjB,EAAS,WAAW,YAAcc,EAAeG,EAAkB,KAAK,EACxEjB,EAAS,aAAa,YAAcc,EAClCG,EAAkB,OACxB,EACIjB,EAAS,aAAa,YAAcc,EAClCG,EAAkB,OACxB,EAEIb,GAAoB,IAGlBJ,EAAS,UAAU,cAAgB,MACnCA,EAAS,WAAW,cAAgB,MACpCA,EAAS,aAAa,cAAgB,MACtCA,EAAS,aAAa,cAAgB,MAEtC,cAAcgB,CAAa,CAE9B,EAAE,GAAI,CACT,CAAC"}